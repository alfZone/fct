<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Distribuir Alunos - Escola Esmonserrate</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { font-family: 'Roboto', sans-serif; background:#f5f7fa; margin:0; text-align:center; }
header, footer { background:#004080; color:#fff; padding:15px 0; }
header img { height:60px; margin-bottom:10px; }
main { max-width:900px; margin:30px auto; padding:20px; background:#fff; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
h1 { text-align:center; color:#004080; margin-bottom:20px; }
table { width:100%; border-collapse:collapse; margin-bottom:20px; }
th, td { border:1px solid #ddd; padding:10px; text-align:center; }
th { background-color:#004080; color:#fff; }
select { width:100%; padding:5px; border-radius:5px; border:1px solid #ccc; }
.buttons-container { display:flex; justify-content:space-between; gap:4%; }
.btn { padding:12px 25px; font-size:1rem; color:#fff; border:none; border-radius:8px; cursor:pointer; transition:0.3s; width:48%; }
.btn-distribuir { background-color:#0073e6; }
.btn-distribuir:hover { background-color:#005bb5; }
.btn-voltar { background-color:#555; }
.btn-voltar:hover { background-color:#333; }
</style>
</head>
<body>

<header>
<img src="..//templates/base/imagens/esm_174.png" alt="Logo Escola Esmonserrate">
<p>Professora: Maria Silva</p>
<p>Bem-vindo(a)!</p>
</header>

<main>
<h1>Distribuição de Alunos por Empresas</h1>

<form id="formDistribuicao" action="processarDistribuicao.php" method="post">
<table class="table table-striped">
<thead>
<tr>
<th>Alunos</th>
<th>Escolha a Empresa</th>
</tr>
</thead>
<tbody id="tabelaAlunos">
<!-- Alunos serão carregados via JS -->
</tbody>
</table>

<div class="buttons-container">
<button type="submit" class="btn btn-distribuir">Distribuir Selecionados</button>
<button type="button" class="btn btn-voltar" onclick="location.href='index.html'">Voltar</button>
</div>
</form>
</main>

<footer>
&copy; 2025 Escola Esmonserrate. Todos os direitos reservados.
</footer>

<script>
const API_ALUNOS = 'endpointAlunos.php';     // seu endpoint que retorna JSON de alunos
const API_EMPRESAS = 'endpointEmpresas.php'; // seu endpoint que retorna JSON de empresas

let alunos = [];
let empresas = [];

async function carregarDados() {
    try {
        const [resAlunos, resEmpresas] = await Promise.all([
            fetch(API_ALUNOS),
            fetch(API_EMPRESAS)
        ]);
        alunos = await resAlunos.json();
        empresas = await resEmpresas.json();
        renderTabela();
    } catch (err) {
        console.error("Erro ao carregar dados:", err);
        document.getElementById('tabelaAlunos').innerHTML = '<tr><td colspan="2">Erro ao carregar alunos e empresas.</td></tr>';
    }
}

function renderTabela() {
    const tbody = document.getElementById('tabelaAlunos');
    tbody.innerHTML = '';
    alunos.forEach(aluno => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td><strong>${aluno.Nome}</strong></td>
            <td>
                <select name="empresa[${aluno.Processo}]">
                    <option value="">Selecione a empresa</option>
                    ${empresas.map(emp => `<option value="${emp.ID}">${emp.Nome}</option>`).join('')}
                </select>
            </td>
        `;
        tbody.appendChild(tr);
    });
}

// Inicializa
carregarDados();
</script>

</body>
</html>



